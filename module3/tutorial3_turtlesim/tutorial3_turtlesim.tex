% !TeX document-id = {ed9f9aeb-6fc7-4042-9422-9ce343a26700}
\documentclass[12pt]{article}

\usepackage{multirow}
\usepackage{multicol}
\usepackage{framed}
%\usepackage{mdframed}
\usepackage{setspace}
\usepackage{color}
\usepackage{xcolor}
\usepackage{hyperref}
\usepackage[pdftex]{graphicx}
\usepackage{keystroke}
\usepackage{lipsum} 
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage{textcomp}
\usepackage[T1]{fontenc} 
\usepackage{MnSymbol,wasysym}
\usepackage{tikzsymbols}

\usepackage{enumitem}
\setlist[description]{leftmargin=\parindent,labelindent=\parindent}

\usepackage{geometry}
 \geometry{
 left=20mm,
 right=10mm,
 top=20mm,
 }

\textwidth=7.0in
\topmargin=-0.6in
\leftmargin=0.5in
\textheight=9.25in
\hoffset=-0.5in
\footskip=0.2in

%\usepackage{pygmentize}
\usepackage{minted}
%\newminted[python]{python}{frame=single}
%\fvset{showspaces}
%\renewcommand\FancyVerbSpace{\textcolor{mygray}{\char32}}
\setminted[text]{
	escapeinside=||, 
	%breaksymbolleft=\carriagereturn,
	frame=single,
	%showspaces=true
	framesep=2mm,
	baselinestretch=1.2,
	bgcolor=mygray
}

% all 4 borders
%\newmdenv{allfour}

\hypersetup{
    %bookmarks=true,         % show bookmarks bar?
    unicode=false,          % non-Latin characters in Acrobat’s bookmarks
    pdftoolbar=true,        % show Acrobat’s toolbar?
    pdfmenubar=true,        % show Acrobat’s menu?
    pdffitwindow=false,     % window fit to page when opened
    pdfstartview={FitH},    % fits the width of the page to the window
    pdftitle={My title},    % title
    pdfauthor={Author},     % author
    pdfsubject={Subject},   % subject of the document
    pdfcreator={Creator},   % creator of the document
    pdfproducer={Producer}, % producer of the document
    pdfkeywords={keyword1, key2, key3}, % list of keywords
    pdfnewwindow=true,      % links in new PDF window
    colorlinks=true,       % false: boxed links; true: colored links
    linkcolor=red,          % color of internal links (change box color with linkbordercolor)
    citecolor=green,        % color of links to bibliography
    filecolor=magenta,      % color of file links
    urlcolor=blue           % color of external links
}

%\mdfsetup{
%  linewidth=.5bp,
%  innerleftmargin=3.5bp,
%  innerrightmargin=3.5bp,
%  innertopmargin=.5bp,
%  innerbottommargin=.5bp,
%}

% windows logo
% Lower the picture a little to match the text baseline
\newcommand{\WindowsLogo}{\raisebox{-0.1em}{%
  \includegraphics[height=0.8em]{win_logo}}}
\newcommand{\WinKey}{\keystroke{\WindowsLogo}}

\newcommand{\TAB}{\raisebox{-0.1em}{Tab}}
\newcommand{\TABKey}{\keystroke{\TAB}}

\newcommand{\T}{\raisebox{-0.1em}{T}}
\newcommand{\TKey}{\keystroke{\T}}

\newcommand{\C}{\raisebox{-0.1em}{C}}
\newcommand{\CKey}{\keystroke{\C}}

\newcommand{\CTRL}{\raisebox{-0.1em}{Ctrl}}
\newcommand{\CTRLKey}{\keystroke{\CTRL}}

\newcommand{\ALT}{\raisebox{-0.1em}{Alt}}
\newcommand{\ALTKey}{\keystroke{\ALT}}

\newcommand{\ENTER}{\raisebox{-0.1em}{Enter}}
\newcommand{\ENTERKey}{\keystroke{\ENTER}}

\newcommand{\I}{\raisebox{-0.1em}{I}}
\newcommand{\IKey}{\keystroke{\I}}

\newcommand{\Kay}{\raisebox{-0.1em}{K}}
\newcommand{\KayKey}{\keystroke{\Kay}}

\newcommand{\J}{\raisebox{-0.1em}{J}}
\newcommand{\JKey}{\keystroke{\J}}

\newcommand{\EL}{\raisebox{-0.1em}{L}}
\newcommand{\ELKey}{\keystroke{\EL}}

\newcommand{\COMMA}{\raisebox{-0.1em}{,}}
\newcommand{\COMMAKey}{\keystroke{\COMMA}}

%\pagestyle{myheadings}
%\markright{{\large ME 4140 Fall 2019---The Robotic Operating System}}

\definecolor{monokaibg}{HTML}{272822}
\definecolor{friendlybg}{HTML}{f0f0f0}
\definecolor{mygreen}{rgb}{0.1333 ,  0.5451,    0.1333}
\definecolor{mypink}{rgb}{0.1333 ,  0.5451,    0.1333}
\definecolor{mygreen}{rgb}{0, .39, 0}
%\definecolor{dred}{#8B0000} 
\definecolor{mypurple}{rgb}{0.6,0.1961,0.8}
\definecolor{mybrown}{rgb}{0.5451,0.2706,0.0745}
\definecolor{mygray}{rgb}{.83, .83, .83}

\newcommand{\R}{\color{red}}
\newcommand{\B}{\color{blue}}
\newcommand{\K}{\color{black}}
%\newcommand{\G}{\color{mygreen}}
\newcommand{\PR}{\color{mypurple}}
\newcommand{\GY}{\color{mygray}}

\newcommand{\VA}{\vspace{2mm}}
\newcommand{\VB}{\vspace{5mm}} 
\newcommand{\VC}{\vspace{30mm}} 

\newcommand{\SQ}{\textquotesingle} 

\begin{document}

%\thispagestyle{plain}

\begin{center}
   {\bf \Large ROS Workshop - Tutorial 3 - Turtlesim}\vspace{3mm} \\
   {\bf \large ME 4140 - Introduction to Robotics - Fall 2020} \vspace{5mm}\\
\end{center}

\begin{description}

\item[\textbf{\underline{Overview:}}] \hfill \vspace{3mm}\\
After completing {\it Tutorial 2 - Install ROS}, your system is setup. You are ready to begin with Turtlesim, a simplistic robot model and simulator that serves as the {\it Hello World of ROS}. You can read more about turtlesim \href{http://wiki.ros.org/turtlesim}{here} on the wiki. 

\item[\textbf{\underline{System Requirements:}}] \hfill \vspace{0mm}

\begin{itemize}
	\item {\bf ROS+OS}: This tutorial is intended for a system with ROS Melodic installed on the Ubuntu 18.04 LTS operating system. Alternate versions of ROS (i.e. - Kinetic, Noetic, etc.) may work but have not been tested. Versions of ROS are tied to versions of Ubuntu.
	\item {\bf Internet:} Your computer must be connected to the internet to proceed. Downloading and installing {\it turtlesim} will only take a few minutes.
\end{itemize}

\item[\textbf{\underline{Disclaimer:}}] \hfill \vspace{0mm}

\begin{itemize}
	\item {\bf\R Copy and Paste Errors:} {\R The ilearn PDF viewer does not allow the commands to be copied properly. Download the PDF if you want to copy and paste commands.} 
	
	\item {\bf Learn the Terminal:} The commands in this tutorial are relatively short, and it may help improve understanding to type them manually. {\bf Press \TABKey for auto-completion!}
	
\end{itemize}

\item[\textbf{\underline{Turtlesim Installation Instructions:}}] \hfill \vspace{0mm}

Press \CTRLKey+\ALTKey+\TKey to open a new terminal, then carefully copy each command and paste it into the terminal then press \ENTERKey. The terminal commands are shown in gray boxes, and {\bf you will have multiple terminals open at once during this tutorial.} 


\begin{enumerate}    
 
	\item Update your Ubuntu packages. It is recommended to do this before you begin something new. 

	\begin{minted}{text}
sudo apt update
	\end{minted} 
 
\item Install \href{http://wiki.ros.org/turtlesim}{turtlesim} for ROS Melodic from the pre-built repositories. This will take a few moments. Also, install a keyboard controller node.
			
\begin{minted}{text}
sudo apt install ros-melodic-turtlesim
\end{minted}

\begin{minted}{text}
sudo apt install ros-melodic-teleop-twist-keyboard
\end{minted}
	
The terminal will show if the installations were successfully, and it will indicate if the packages were previously installed (turtlesim came with ros-melodic-desktop-full).
	
\end{enumerate}	

\newpage
\item[\textbf{\underline{Turtlesim Testdrive:}}] \hfill \vspace{0mm}

Now, test the newly installed simulator. This exercise is simple, but the process is important. 

%\begin{minted}{text}
%sudo apt-get install ros-melodic-turtlesim
%\end{minted}		
%
\begin{enumerate}

\item Start the roscore in a terminal. Leave this process running and this window open. 	 

\begin{minted}{text}
roscore
\end{minted}

%\begin{minted}{text}
%roscore
%\end{minted}		

\item Open a second tab (file>new tab), and start a turtlesim\_node in the new terminal tab.

\begin{minted}{text}
rosrun turtlesim turtlesim_node
\end{minted}
%\begin{minted}{text}
%rosrun turtlesim turtlesim_node
%\end{minted}				
%
%	
%\begin{minted}{text}
% rostopic list
%\end{minted}		

			
\item In a third terminal tab run the keyboard controller node.

\begin{minted}{text}
rosrun teleop_twist_keyboard teleop_twist_keyboard.py
\end{minted}
			


\includegraphics[scale=0.4]{tutorial3_fig3.png}	
\includegraphics[scale=0.4]{tutorial3_fig2.png}	

There is a problem, the nodes are not communicating. The turtlesim node is not subscribing the to topic published by the keyboard node. \vspace{3mm}\\


\newpage
\item {\bf rostopic} is a tool in ROS for this type of problem. Try this in a new terminal with your other nodes still running.



\begin{multicols}{2}

List all available topics under master
\begin{minted}{text}
rostopic list
\end{minted}
Get info about topic: {\bf /cmd\_vel}
\begin{minted}{text}
rostopic info /cmd_vel
\end{minted}
Get info about topic: {\bf /turtle1/cmd\_vel}
\begin{minted}{text}
rostopic info /turtle1/cmd_vel
\end{minted}

\vspace{10mm} 

\includegraphics[scale=0.4]{tutorial3_fig4.png} \vspace{3mm}\\

\end{multicols}	
\vspace{5mm}
\item Abort the keyboard node by clicking in the third tab and pressing \CTRLKey +\CKey. Then {\bf append the following option} to the end of the keyboard node command and rerun the node. Now, the keyboard node can communicate with the turtle. 
\begin{minted}{text}
                        cmd_vel:=turtle1/cmd_vel
\end{minted}

\begin{multicols}{2}

\begin{framed}
Move the turtlesim window to the side, and select the keyboard terminal to drive using the following keys.\vspace{2mm}\\ \IKey, \JKey,\KayKey, \ELKey, and \COMMAKey (comma) \vspace{5mm}

Drive your turtle around the window and save an image of the window showing the turtle and the path. Can you drive a better ROS than shown in this picture? 
\end{framed}

\includegraphics[scale=0.4]{tutorial3_fig1.png}	
\end{multicols}			
			
\end{enumerate}  

\underline{After completing {\it Tutorial 3 - Turtlesim}, you are ready for a more advanced robot simulator.}

%\newpage

%\item[\textbf{\underline{Test What you have done}}]

\end{description}

\end{document}
